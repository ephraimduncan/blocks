{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-upload-01",
  "type": "registry:block",
  "title": "File Upload with Preview",
  "description": "A file upload with preview block.",
  "author": "ephraim duncan <https://ephraimduncan.com>",
  "registryDependencies": [
    "button",
    "card",
    "input",
    "label",
    "select",
    "tooltip"
  ],
  "dependencies": [
    "lucide-react"
  ],
  "files": [
    {
      "path": "content/components/file-upload/file-upload-01.tsx",
      "type": "registry:component",
      "target": "components/file-upload-01.tsx",
      "content": "\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { HelpCircle, Trash2, Upload } from \"lucide-react\";\r\nimport { useRef, useState } from \"react\";\r\n\r\nexport default function FileUpload01() {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\r\n  const [fileProgresses, setFileProgresses] = useState<Record<string, number>>(\r\n    {}\r\n  );\r\n\r\n  const handleFileSelect = (files: FileList | null) => {\r\n    if (!files) return;\r\n\r\n    const newFiles = Array.from(files);\r\n    setUploadedFiles((prev) => [...prev, ...newFiles]);\r\n\r\n    // Simulate upload progress for each file\r\n    newFiles.forEach((file) => {\r\n      let progress = 0;\r\n      const interval = setInterval(() => {\r\n        progress += Math.random() * 10;\r\n        if (progress >= 100) {\r\n          progress = 100;\r\n          clearInterval(interval);\r\n        }\r\n        setFileProgresses((prev) => ({\r\n          ...prev,\r\n          [file.name]: Math.min(progress, 100),\r\n        }));\r\n      }, 300);\r\n    });\r\n  };\r\n\r\n  const handleBoxClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    handleFileSelect(e.dataTransfer.files);\r\n  };\r\n\r\n  const removeFile = (filename: string) => {\r\n    setUploadedFiles((prev) => prev.filter((file) => file.name !== filename));\r\n    setFileProgresses((prev) => {\r\n      const newProgresses = { ...prev };\r\n      delete newProgresses[filename];\r\n      return newProgresses;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center p-10\">\r\n      <Card className=\"w-full mx-auto max-w-lg bg-background rounded-lg p-0 shadow-md\">\r\n        <CardContent className=\"p-0\">\r\n          <div className=\"p-6 pb-4\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h2 className=\"text-lg font-medium text-foreground\">\r\n                  Create a new project\r\n                </h2>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                  Drag and drop files to create a new project.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"px-6 pb-4 mt-2\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <Label htmlFor=\"projectName\" className=\"mb-2\">\r\n                  Project name\r\n                </Label>\r\n                <Input\r\n                  id=\"projectName\"\r\n                  type=\"text\"\r\n                  defaultValue=\"Open Source Stripe\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"projectLead\" className=\"mb-2\">\r\n                  Project lead\r\n                </Label>\r\n                <Select defaultValue=\"1\">\r\n                  <SelectTrigger id=\"projectLead\" className=\"ps-2 w-full\">\r\n                    <SelectValue placeholder=\"Select project lead\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectGroup>\r\n                      <SelectItem value=\"1\">\r\n                        <img\r\n                          className=\"size-5 rounded\"\r\n                          src=\"https://blocks.so/avatar-01.png\"\r\n                          alt=\"Ephraim Duncan\"\r\n                          width={20}\r\n                          height={20}\r\n                        />\r\n                        <span className=\"truncate\">Ephraim Duncan</span>\r\n                      </SelectItem>\r\n                      <SelectItem value=\"2\">\r\n                        <img\r\n                          className=\"size-5 rounded\"\r\n                          src=\"https://blocks.so/avatar-03.png\"\r\n                          alt=\"Lucas Smith\"\r\n                          width={20}\r\n                          height={20}\r\n                        />\r\n                        <span className=\"truncate\">Lucas Smith</span>\r\n                      </SelectItem>\r\n                      <SelectItem value=\"3\">\r\n                        <img\r\n                          className=\"size-5 rounded\"\r\n                          src=\"https://blocks.so/avatar-02.jpg\"\r\n                          alt=\"Timur Ercan\"\r\n                          width={20}\r\n                          height={20}\r\n                        />\r\n                        <span className=\"truncate\">Timur Ercan</span>\r\n                      </SelectItem>\r\n                    </SelectGroup>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"px-6\">\r\n            <div\r\n              className=\"border-2 border-dashed border-border rounded-md p-8 flex flex-col items-center justify-center text-center cursor-pointer\"\r\n              onClick={handleBoxClick}\r\n              onDragOver={handleDragOver}\r\n              onDrop={handleDrop}\r\n            >\r\n              <div className=\"mb-2 bg-muted rounded-full p-3\">\r\n                <Upload className=\"h-5 w-5 text-muted-foreground\" />\r\n              </div>\r\n              <p className=\"text-sm font-medium text-foreground\">\r\n                Upload a project image\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                or,{\" \"}\r\n                <label\r\n                  htmlFor=\"fileUpload\"\r\n                  className=\"text-primary hover:text-primary/90 font-medium cursor-pointer\"\r\n                  onClick={(e) => e.stopPropagation()}\r\n                >\r\n                  click to browse\r\n                </label>{\" \"}\r\n                (4MB max)\r\n              </p>\r\n              <input\r\n                type=\"file\"\r\n                id=\"fileUpload\"\r\n                ref={fileInputRef}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n                onChange={(e) => handleFileSelect(e.target.files)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            className={cn(\r\n              \"px-6 pb-5 space-y-3\",\r\n              uploadedFiles.length > 0 ? \"mt-4\" : \"\"\r\n            )}\r\n          >\r\n            {uploadedFiles.map((file, index) => {\r\n              const imageUrl = URL.createObjectURL(file);\r\n\r\n              return (\r\n                <div\r\n                  className=\"border border-border rounded-lg p-2 flex flex-col\"\r\n                  key={file.name + index}\r\n                  onLoad={() => {\r\n                    return () => URL.revokeObjectURL(imageUrl);\r\n                  }}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-18 h-14 bg-muted rounded-sm flex items-center justify-center self-start row-span-2 overflow-hidden\">\r\n                      <img\r\n                        src={imageUrl}\r\n                        alt={file.name}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 pr-1\">\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-sm text-foreground truncate max-w-[250px]\">\r\n                            {file.name}\r\n                          </span>\r\n                          <span className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                            {Math.round(file.size / 1024)} KB\r\n                          </span>\r\n                        </div>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          className=\"h-8 w-8 bg-transparent! hover:text-red-500\"\r\n                          onClick={() => removeFile(file.name)}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"h-2 bg-muted rounded-full overflow-hidden flex-1\">\r\n                          <div\r\n                            className=\"h-full bg-primary\"\r\n                            style={{\r\n                              width: `${fileProgresses[file.name] || 0}%`,\r\n                            }}\r\n                          ></div>\r\n                        </div>\r\n                        <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\r\n                          {Math.round(fileProgresses[file.name] || 0)}%\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"px-6 py-3 border-t border-border bg-muted rounded-b-lg flex justify-between items-center\">\r\n            <TooltipProvider delayDuration={0}>\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"flex items-center text-muted-foreground hover:text-foreground\"\r\n                  >\r\n                    <HelpCircle className=\"h-4 w-4 mr-1\" />\r\n                    Need help?\r\n                  </Button>\r\n                </TooltipTrigger>\r\n                <TooltipContent className=\"py-3 bg-background text-foreground border\">\r\n                  <div className=\"space-y-1\">\r\n                    <p className=\"text-[13px] font-medium\">Need assistance?</p>\r\n                    <p className=\"text-muted-foreground dark:text-muted-background text-xs max-w-[200px]\">\r\n                      Upload project images by dragging and dropping files or\r\n                      using the file browser. Supported formats: JPG, PNG, SVG.\r\n                      Maximum file size: 4MB.\r\n                    </p>\r\n                  </div>\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </TooltipProvider>\r\n\r\n            <div className=\"flex gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"h-9 px-4 text-sm font-medium\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button className=\"h-9 px-4 text-sm font-medium\">Continue</Button>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"
    }
  ],
  "categories": [
    "file-upload"
  ]
}