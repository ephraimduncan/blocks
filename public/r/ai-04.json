{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ai-04",
  "type": "registry:block",
  "title": "AI Chat with File Attachments",
  "description": "A ai chat with file attachments block.",
  "author": "ephraim duncan <https://ephraimduncan.com>",
  "registryDependencies": [
    "badge",
    "button",
    "dropdown-menu",
    "label",
    "switch",
    "textarea"
  ],
  "dependencies": [
    "@tabler/icons-react"
  ],
  "files": [
    {
      "path": "content/components/ai/ai-04.tsx",
      "type": "registry:component",
      "target": "components/ai-04.tsx",
      "content": "\"use client\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuGroup,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  IconAdjustmentsHorizontal,\r\n  IconArrowUp,\r\n  IconBrandFigma,\r\n  IconCamera,\r\n  IconCirclePlus,\r\n  IconClipboard,\r\n  IconFileUpload,\r\n  IconHistory,\r\n  IconLayoutDashboard,\r\n  IconLink,\r\n  IconPaperclip,\r\n  IconPlayerPlay,\r\n  IconPlus,\r\n  IconSparkles,\r\n  IconTemplate,\r\n  IconX,\r\n} from \"@tabler/icons-react\";\r\nimport Image from \"next/image\";\r\nimport { useRef, useState } from \"react\";\r\n\r\ninterface AttachedFile {\r\n  id: string;\r\n  name: string;\r\n  file: File;\r\n  preview?: string;\r\n}\r\n\r\nconst ACTIONS = [\r\n  { id: \"clone-screenshot\", icon: IconCamera, label: \"Clone a Screenshot\" },\r\n  { id: \"import-figma\", icon: IconBrandFigma, label: \"Import from Figma\" },\r\n  { id: \"upload-project\", icon: IconFileUpload, label: \"Upload a Project\" },\r\n  { id: \"landing-page\", icon: IconLayoutDashboard, label: \"Landing Page\" },\r\n];\r\n\r\nexport default function Ai04({\r\n  onSubmit,\r\n}: {\r\n  onSubmit?: (prompt: string) => void;\r\n}) {\r\n  const [prompt, setPrompt] = useState(\"\");\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const [attachedFiles, setAttachedFiles] = useState<AttachedFile[]>([]);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [settings, setSettings] = useState({\r\n    autoComplete: true,\r\n    streaming: false,\r\n    showHistory: false,\r\n  });\r\n\r\n  const generateFileId = () => Math.random().toString(36).substring(7);\r\n  const processFiles = (files: File[]) => {\r\n    for (const file of files) {\r\n      const fileId = generateFileId();\r\n      const attachedFile: AttachedFile = {\r\n        id: fileId,\r\n        name: file.name,\r\n        file,\r\n      };\r\n\r\n      if (file.type.startsWith(\"image/\")) {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          setAttachedFiles((prev) =>\r\n            prev.map((f) =>\r\n              f.id === fileId ? { ...f, preview: reader.result as string } : f\r\n            )\r\n          );\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n\r\n      setAttachedFiles((prev) => [...prev, attachedFile]);\r\n    }\r\n  };\r\n  const submitPrompt = () => {\r\n    if (prompt.trim() && onSubmit) {\r\n      onSubmit(prompt.trim());\r\n      setPrompt(\"\");\r\n    }\r\n  };\r\n  const updateSetting = (key: keyof typeof settings, value: boolean) => {\r\n    setSettings((prev) => ({ ...prev, [key]: value }));\r\n  };\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    submitPrompt();\r\n  };\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(true);\r\n  };\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(false);\r\n  };\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragOver(false);\r\n\r\n    const files = Array.from(e.dataTransfer.files);\r\n    if (files.length > 0) {\r\n      processFiles(files);\r\n    }\r\n  };\r\n  const handleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setPrompt(e.target.value);\r\n  };\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      submitPrompt();\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    processFiles(files);\r\n\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  const handleRemoveFile = (fileId: string) => {\r\n    setAttachedFiles((prev) => prev.filter((file) => file.id !== fileId));\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto flex w-full flex-col gap-4\">\r\n      <h1 className=\"text-pretty text-center font-heading font-semibold text-[29px] text-foreground tracking-tighter sm:text-[32px] md:text-[46px]\">\r\n        Prompt. Refine. Ship.\r\n      </h1>\r\n      <h2 className=\"-my-5 pb-4 text-center text-xl text-muted-foreground\">\r\n        Build real, working software just by describing it\r\n      </h2>\r\n\r\n      <div className=\"relative z-10 flex flex-col w-full mx-auto max-w-2xl content-center\">\r\n        <form\r\n          className=\"overflow-visible rounded-xl border p-2 transition-colors duration-200 focus-within:border-ring\"\r\n          onDragLeave={handleDragLeave}\r\n          onDragOver={handleDragOver}\r\n          onDrop={handleDrop}\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {attachedFiles.length > 0 && (\r\n            <div className=\"relative flex w-fit items-center gap-2 mb-2 overflow-hidden\">\r\n              {attachedFiles.map((file) => (\r\n                <Badge\r\n                  variant=\"outline\"\r\n                  className=\"group relative h-6 max-w-30 cursor-pointer overflow-hidden text-[13px] transition-colors hover:bg-accent px-0\"\r\n                  key={file.id}\r\n                >\r\n                  <span className=\"flex h-full items-center gap-1.5 overflow-hidden pl-1 font-normal\">\r\n                    <div className=\"relative flex h-4 min-w-4 items-center justify-center\">\r\n                      {file.preview ? (\r\n                        <Image\r\n                          alt={file.name}\r\n                          className=\"absolute inset-0 h-4 w-4 rounded border object-cover\"\r\n                          src={file.preview}\r\n                          width={16}\r\n                          height={16}\r\n                        />\r\n                      ) : (\r\n                        <IconPaperclip className=\"opacity-60\" size={12} />\r\n                      )}\r\n                    </div>\r\n                    <span className=\"inline overflow-hidden truncate pr-1.5 transition-all\">\r\n                      {file.name}\r\n                    </span>\r\n                  </span>\r\n                  <button\r\n                    className=\"absolute right-1 z-10 rounded-sm p-0.5 text-muted-foreground opacity-0 focus-visible:bg-accent focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-background group-hover:opacity-100\"\r\n                    onClick={() => handleRemoveFile(file.id)}\r\n                    type=\"button\"\r\n                  >\r\n                    <IconX size={12} />\r\n                  </button>\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          )}\r\n          <Textarea\r\n            className=\"max-h-50 min-h-12 resize-none rounded-none border-none bg-transparent! p-0 text-sm shadow-none focus-visible:border-transparent focus-visible:ring-0\"\r\n            onChange={handleTextareaChange}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Ask anything\"\r\n            value={prompt}\r\n          />\r\n\r\n          <div className=\"flex items-center gap-1\">\r\n            <div className=\"flex items-end gap-0.5 sm:gap-1\">\r\n              <input\r\n                className=\"sr-only\"\r\n                multiple\r\n                onChange={handleFileSelect}\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n              />\r\n\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button\r\n                    className=\"ml-[-2px] h-7 w-7 rounded-md\"\r\n                    size=\"icon\"\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                  >\r\n                    <IconPlus size={16} />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent\r\n                  align=\"start\"\r\n                  className=\"max-w-xs rounded-2xl p-1.5\"\r\n                >\r\n                  <DropdownMenuGroup className=\"space-y-1\">\r\n                    <DropdownMenuItem\r\n                      className=\"rounded-[calc(1rem-6px)] text-xs\"\r\n                      onClick={() => fileInputRef.current?.click()}\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconPaperclip className=\"text-muted-foreground\" size={16} />\r\n                        <span>Attach Files</span>\r\n                      </div>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuItem className=\"rounded-[calc(1rem-6px)] text-xs\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconLink className=\"text-muted-foreground\" size={16} />\r\n                        <span>Import from URL</span>\r\n                      </div>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuItem className=\"rounded-[calc(1rem-6px)] text-xs\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconClipboard className=\"text-muted-foreground\" size={16} />\r\n                        <span>Paste from Clipboard</span>\r\n                      </div>\r\n                    </DropdownMenuItem>\r\n                    <DropdownMenuItem className=\"rounded-[calc(1rem-6px)] text-xs\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconTemplate className=\"text-muted-foreground\" size={16} />\r\n                        <span>Use Template</span>\r\n                      </div>\r\n                    </DropdownMenuItem>\r\n                  </DropdownMenuGroup>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button\r\n                    className=\"size-7 rounded-md\"\r\n                    size=\"icon\"\r\n                    type=\"button\"\r\n                    variant=\"ghost\"\r\n                  >\r\n                    <IconAdjustmentsHorizontal size={16} />\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent\r\n                  align=\"start\"\r\n                  className=\"w-48 rounded-2xl p-3\"\r\n                >\r\n                  <DropdownMenuGroup className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconSparkles className=\"text-muted-foreground\" size={16} />\r\n                        <Label className=\"text-xs\">Auto-complete</Label>\r\n                      </div>\r\n                      <Switch\r\n                        checked={settings.autoComplete}\r\n                        className=\"scale-75\"\r\n                        onCheckedChange={(value) =>\r\n                          updateSetting(\"autoComplete\", value)\r\n                        }\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconPlayerPlay className=\"text-muted-foreground\" size={16} />\r\n                        <Label className=\"text-xs\">Streaming</Label>\r\n                      </div>\r\n                      <Switch\r\n                        checked={settings.streaming}\r\n                        className=\"scale-75\"\r\n                        onCheckedChange={(value) =>\r\n                          updateSetting(\"streaming\", value)\r\n                        }\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <IconHistory className=\"text-muted-foreground\" size={16} />\r\n                        <Label className=\"text-xs\">Show History</Label>\r\n                      </div>\r\n                      <Switch\r\n                        checked={settings.showHistory}\r\n                        className=\"scale-75\"\r\n                        onCheckedChange={(value) =>\r\n                          updateSetting(\"showHistory\", value)\r\n                        }\r\n                      />\r\n                    </div>\r\n                  </DropdownMenuGroup>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            </div>\r\n\r\n            <div className=\"ml-auto flex items-center gap-0.5 sm:gap-1\">\r\n              <Button\r\n                className=\"h-7 w-7 rounded-md\"\r\n                disabled={!prompt.trim()}\r\n                size=\"icon\"\r\n                type=\"submit\"\r\n                variant=\"default\"\r\n              >\r\n                <IconArrowUp size={16} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            className={cn(\r\n              \"absolute inset-0 flex items-center justify-center pointer-events-none z-20 rounded-[inherit] border border-border border-dashed bg-muted text-foreground text-sm transition-opacity duration-200\",\r\n              isDragOver ? \"opacity-100\" : \"opacity-0\"\r\n            )}\r\n          >\r\n            <span className=\"flex w-full items-center justify-center gap-1 font-medium\">\r\n              <IconCirclePlus className=\"min-w-4\" size={16} />\r\n              Drop files here to add as attachments\r\n            </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"max-w-250 mx-auto flex-wrap gap-3 flex min-h-0 shrink-0 items-center justify-center\">\r\n        {ACTIONS.map((action) => (\r\n          <Button\r\n            className=\"gap-2 rounded-full\"\r\n            key={action.id}\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n          >\r\n            <action.icon size={16} />\r\n            {action.label}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
    }
  ],
  "categories": [
    "ai"
  ]
}