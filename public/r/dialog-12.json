{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dialog-12",
  "type": "registry:block",
  "title": "Dialog with Avatar Upload",
  "description": "A dialog with avatar upload block.",
  "author": "ephraim duncan <https://ephraimduncan.com>",
  "registryDependencies": [
    "avatar",
    "button",
    "dialog",
    "input",
    "label"
  ],
  "dependencies": [
    "lucide-react"
  ],
  "files": [
    {
      "path": "content/components/dialogs/dialog-12.tsx",
      "type": "registry:component",
      "target": "components/dialog-12.tsx",
      "content": "\"use client\";\r\n\r\nimport { Plus, UserRoundIcon, X } from \"lucide-react\";\r\nimport { useRef, useState } from \"react\";\r\n\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nexport default function Dialog12() {\r\n  const [open, setOpen] = useState(true);\r\n  const [authorName, setAuthorName] = useState(\"Ephraim Duncan\");\r\n  const [title, setTitle] = useState(\"Design Engineer\");\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      if (file.size > 1048576) {\r\n        alert(\"File size exceeds 1MB limit\");\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        setImage(event.target?.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const triggerFileInput = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button>Open Dialog</Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-lg p-0 rounded-3xl gap-0\">\r\n        <DialogHeader className=\"border-b px-6 py-4\">\r\n          <DialogTitle className=\"font-medium\">Add a writer</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-5 px-6 pt-4 pb-6\">\r\n          <div className=\"flex flex-col items-center justify-center  md:col-span-2\">\r\n            <div className=\"relative mb-2\">\r\n              <Avatar className=\"h-24 w-24 border-2 border-muted\">\r\n                <AvatarImage src={image || undefined} alt=\"Profile\" />\r\n                <AvatarFallback>\r\n                  <UserRoundIcon\r\n                    size={52}\r\n                    className=\"text-muted-foreground\"\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"absolute -top-0.5 -right-0.5 bg-accent rounded-full border-[3px] border-background h-8 w-8 hover:bg-accent\"\r\n                onClick={() => {\r\n                  if (image) {\r\n                    setImage(null);\r\n                    if (fileInputRef.current) {\r\n                      fileInputRef.current.value = \"\";\r\n                    }\r\n                  } else {\r\n                    triggerFileInput();\r\n                  }\r\n                }}\r\n              >\r\n                {image ? (\r\n                  <X className=\"h-4 w-4 text-muted-foreground\" />\r\n                ) : (\r\n                  <Plus className=\"h-3 w-3 text-muted-foreground\" />\r\n                )}\r\n                <span className=\"sr-only\">\r\n                  {image ? \"Remove image\" : \"Upload image\"}\r\n                </span>\r\n              </Button>\r\n            </div>\r\n\r\n            <p className=\"text-center font-medium\">Upload Image</p>\r\n            <p className=\"text-center text-sm text-muted-foreground\">\r\n              Max file size: 1MB\r\n            </p>\r\n            <input\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              onChange={handleFileChange}\r\n              accept=\"image/*\"\r\n              className=\"hidden\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"mt-2\"\r\n              onClick={triggerFileInput}\r\n            >\r\n              Add Image\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col justify-between md:col-span-3\">\r\n            <div className=\"space-y-4\">\r\n              <div className=\"space-y-1\">\r\n                <Label htmlFor=\"author-name\" className=\"flex items-center\">\r\n                  Author name <span className=\"text-primary\">*</span>\r\n                </Label>\r\n                <Input\r\n                  id=\"author-name\"\r\n                  value={authorName}\r\n                  onChange={(e) => setAuthorName(e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"space-y-1\">\r\n                <div className=\"flex items-center\">\r\n                  <Label htmlFor=\"title\">Title</Label>\r\n                </div>\r\n                <Input\r\n                  id=\"title\"\r\n                  value={title}\r\n                  onChange={(e) => setTitle(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-2\">\r\n              <Button variant=\"outline\" onClick={() => setOpen(false)}>\r\n                Cancel\r\n              </Button>\r\n              <Button className=\"bg-foreground text-background hover:bg-foreground/90\">\r\n                Save Changes\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"
    }
  ],
  "categories": [
    "dialogs"
  ]
}